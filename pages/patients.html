<!-- Patients Page -->
<div class="page-content" id="patients-page">
  <div class="search-bar">
    <div class="search-container">
      <input type="text" placeholder="Search patients by name, ID or phone..." id="patientSearch"
        oninput="searchPatients()">
      <span class="clear-icon" onclick="clearPatientSearchBar('patientSearch', 'patient')">&#10006;</span>
    </div>
    <button class="btn btn-secondary" onclick="openAddPatientModal()">+ Add Patient</button>
  </div>

  <div class="patient-stats">
    <div class="patient-stat-card">
      <div class="patient-stat-value" id="totalPatientsCount">0</div>
      <div class="patient-stat-label">Total Patients</div>
    </div>
    <div class="patient-stat-card">
      <div class="patient-stat-value" id="newPatientsMonth">0</div>
      <div class="patient-stat-label">New This Month</div>
    </div>
    <div class="patient-stat-card">
      <div class="patient-stat-value" id="activePatients">0</div>
      <div class="patient-stat-label">Active Patients</div>
    </div>
    <div class="patient-stat-card">
      <div class="patient-stat-value" id="criticalPatients">0</div>
      <div class="patient-stat-label">Critical Cases</div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h3 class="card-title">Patient Records</h3>
      <div class="action-buttons">
        <button class="btn btn-outline" onclick="exportPatientData()">Export CSV</button>
        <button class="btn btn-outline" onclick="printPatientList()">Print List</button>
      </div>
    </div>
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Age</th>
          <th>Gender</th>
          <th>Phone</th>
          <th>Blood Group</th>
          <th>Last Visit</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="patientsTable">
        <!-- Dynamic content -->
      </tbody>
    </table>
  </div>
</div>

<!-- Add Patient Modal -->
<div class="modal" id="addPatientModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Add New Patient</h3>
      <button class="close-btn" onclick="closeModal('addPatientModal')">
        <i class="ri-close-line"></i>
      </button>
    </div>
    <div class="modal-body">
      <div class="form-row">
        <div class="form-group">
          <label>First Name</label>
          <input type="text" id="patientFirstName">
        </div>
        <div class="form-group">
          <label>Last Name</label>
          <input type="text" id="patientLastName">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Date of Birth</label>
          <input type="date" id="patientDOB">
        </div>
        <div class="form-group">
          <label>Gender</label>
          <select id="patientGender">
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Phone</label>
          <input type="tel" id="patientPhone">
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="patientEmail">
        </div>
      </div>
      <div class="form-group">
        <label>Address</label>
        <textarea id="patientAddress" rows="3"></textarea>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Blood Group</label>
          <select id="patientBloodGroup" class="select-filter">
            <option value="A+">A+</option>
            <option value="A-">A-</option>
            <option value="B+">B+</option>
            <option value="B-">B-</option>
            <option value="O+">O+</option>
            <option value="O-">O-</option>
            <option value="AB+">AB+</option>
            <option value="AB-">AB-</option>
          </select>
        </div>
        <div class="form-group">
          <label>Emergency Contact</label>
          <input type="tel" id="patientEmergency">
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('addPatientModal')">Cancel</button>
      <button class="btn btn-primary" onclick="savePatient()">Save Patient</button>
    </div>
  </div>
</div>

<!-- View Patient Modal -->
<div class="modal" id="viewPatientModal">
  <div class="modal-content" style="max-width: 900px;">
    <div class="modal-header">
      <h3>Patient Details</h3>
      <button class="close-btn" onclick="closeModal('viewPatientModal')">
        <i class="ri-close-line"></i>
      </button>
    </div>
    <div class="modal-body">
      <div class="tab-buttons">
        <button class="tab-btn active" onclick="switchPatientTab('info')">Basic Info</button>
        <button class="tab-btn" onclick="switchPatientTab('medical')">Medical History</button>
        <button class="tab-btn" onclick="switchPatientTab('medications')">Medications</button>
        <button class="tab-btn" onclick="switchPatientTab('labs')">Lab Reports</button>
        <button class="tab-btn" onclick="switchPatientTab('immunizations')">Immunizations</button>
      </div>

      <div class="tab-content active" id="info-patient-tab">
        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px;">
          <div style="text-align: center; padding: 20px; background: var(--light); border-radius: 8px;">
            <div
              style="width: 100px; height: 100px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 36px; margin: 0 auto 15px;"
              id="patientAvatar">JD</div>
            <h3 id="patientNameDisplay">John Doe</h3>
            <p style="color: #6b7280;" id="patientIdDisplay">P001</p>
            <div style="margin-top: 15px;">
              <span class="badge badge-primary" id="patientBloodGroupDisplay">O+</span>
            </div>
          </div>
          <div>
            <h4 style="margin-bottom: 15px; color: var(--primary);">Personal Information</h4>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
              <div>
                <label style="color: #6b7280; font-size: 12px;">Age</label>
                <p id="patientAgeDisplay">35 years</p>
              </div>
              <div>
                <label style="color: #6b7280; font-size: 12px;">Gender</label>
                <p id="patientGenderDisplay">Male</p>
              </div>
              <div>
                <label style="color: #6b7280; font-size: 12px;">Phone</label>
                <p id="patientPhoneDisplay">9876543210</p>
              </div>
              <div>
                <label style="color: #6b7280; font-size: 12px;">Email</label>
                <p id="patientEmailDisplay">john@email.com</p>
              </div>
              <div style="grid-column: span 2;">
                <label style="color: #6b7280; font-size: 12px;">Address</label>
                <p id="patientAddressDisplay">123 Main Street, Ahmedabad</p>
              </div>
              <div style="grid-column: span 2;">
                <label style="color: #6b7280; font-size: 12px;">Emergency Contact</label>
                <p id="patientEmergencyDisplay">9876543211</p>
              </div>
            </div>

            <h4 style="margin: 20px 0 15px; color: var(--primary);">Medical Information</h4>
            <div>
              <label style="color: #6b7280; font-size: 12px;">Allergies</label>
              <div id="patientAllergiesDisplay" style="margin-top: 5px;">
                <span class="badge badge-danger">Penicillin</span>
                <span class="badge badge-danger">Peanuts</span>
              </div>
            </div>
            <div style="margin-top: 15px;">
              <label style="color: #6b7280; font-size: 12px;">Chronic Conditions</label>
              <div id="patientConditionsDisplay" style="margin-top: 5px;">
                <span class="badge badge-warning">Hypertension</span>
                <span class="badge badge-warning">Type 2 Diabetes</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content" id="medical-patient-tab">
        <h4 style="margin-bottom: 20px; color: var(--primary);">Medical History</h4>
        <div id="medicalHistoryList">
          <!-- Dynamic content -->
        </div>
      </div>

      <div class="tab-content" id="medications-patient-tab">
        <h4 style="margin-bottom: 20px; color: var(--primary);">Current Medications</h4>
        <div id="currentMedicationsList">
          <!-- Dynamic content -->
        </div>
      </div>

      <div class="tab-content" id="labs-patient-tab">
        <h4 style="margin-bottom: 20px; color: var(--primary);">Lab Reports</h4>
        <table class="table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Test</th>
              <th>Result</th>
              <th>Report</th>
            </tr>
          </thead>
          <tbody id="labReportsTable">
            <!-- Dynamic content -->
          </tbody>
        </table>
      </div>

      <div class="tab-content" id="immunizations-patient-tab">
        <h4 style="margin-bottom: 20px; color: var(--primary);">Immunization Records</h4>
        <table class="table">
          <thead>
            <tr>
              <th>Vaccine</th>
              <th>Date Given</th>
              <th>Next Due</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="immunizationsTable">
            <!-- Dynamic content -->
          </tbody>
        </table>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="printPatientRecord()">Print Record</button>
      <button class="btn btn-secondary" onclick="editPatient()">Edit Patient</button>
      <button class="btn btn-primary" onclick="closeModal('viewPatientModal')">Close</button>
    </div>
  </div>
</div>
